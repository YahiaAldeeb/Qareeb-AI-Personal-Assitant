Index: app/src/main/java/com/example/qareeb/data/SessionManager.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.qareeb.data\r\n\r\nimport android.content.Context\r\nimport android.content.SharedPreferences\r\nimport androidx.security.crypto.EncryptedSharedPreferences\r\nimport androidx.security.crypto.MasterKey\r\nimport com.example.qareeb.data.entity.User\r\n\r\n\r\n/**\r\n * SessionManager - Manages user session data securely\r\n * Singleton class to handle user authentication state across the app\r\n */\r\nclass SessionManager private constructor(context: Context) {\r\n\r\n    private var prefs: SharedPreferences\r\n\r\n    init {\r\n        // Initialize encrypted SharedPreferences for security\r\n        val appContext = context.applicationContext\r\n        try {\r\n            val masterKey = MasterKey.Builder(appContext)\r\n                .setKeyScheme(MasterKey.KeyScheme.AES256_GCM)\r\n                .build()\r\n\r\n            prefs = EncryptedSharedPreferences.create(\r\n                context,\r\n                PREFS_NAME,\r\n                masterKey,\r\n                EncryptedSharedPreferences.PrefKeyEncryptionScheme.AES256_SIV,\r\n                EncryptedSharedPreferences.PrefValueEncryptionScheme.AES256_GCM\r\n            )\r\n        } catch (e: Exception) {\r\n            // Fallback to regular SharedPreferences if encryption fails\r\n            prefs = context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE)\r\n        }\r\n    }\r\n\r\n    companion object {\r\n        private const val PREFS_NAME = \"qareeb_secure_prefs\"\r\n        private const val USER_ID = \"user_id\"\r\n        private const val USER_NAME = \"user_name\"\r\n        private const val USER_EMAIL = \"user_email\" // Optional: if you need email\r\n\r\n        @Volatile\r\n        private var instance: SessionManager? = null\r\n\r\n        /**\r\n         * Get singleton instance of SessionManager\r\n         * Thread-safe double-checked locking\r\n         */\r\n        fun getInstance(context: Context): SessionManager {\r\n            return instance ?: synchronized(this) {\r\n                instance ?: SessionManager(context.applicationContext).also {\r\n                    instance = it\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Save complete user session data\r\n     * @param userId User's unique identifier\r\n     * @param username User's display name\r\n     */\r\n    fun saveUserSession(userId: Long, username: String, email: String? = null) {\r\n        prefs.edit().apply {\r\n            putLong(USER_ID, userId)\r\n            putString(USER_NAME, username)\r\n            email?.let { putString(USER_EMAIL, it) }\r\n            apply()\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Save user ID\r\n     */\r\n    fun saveUserId(userId: Long) {\r\n        prefs.edit().putLong(USER_ID, userId).apply()\r\n    }\r\n\r\n    /**\r\n     * Save username\r\n     */\r\n    fun saveUsername(username: String) {\r\n        prefs.edit().putString(USER_NAME, username).apply()\r\n    }\r\n\r\n    /**\r\n     * Save user email\r\n     */\r\n    fun saveUserEmail(email: String) {\r\n        prefs.edit().putString(USER_EMAIL, email).apply()\r\n    }\r\n\r\n    /**\r\n     * Get user ID\r\n     * @return User ID or -1 if not found\r\n     */\r\n    fun getUserId(): Long {\r\n        return prefs.getLong(USER_ID, -1L)\r\n    }\r\n\r\n    /**\r\n     * Get username\r\n     * @return Username or null if not found\r\n     */\r\n    fun getUsername(): String? {\r\n        return prefs.getString(USER_NAME, null)\r\n    }\r\n\r\n    /**\r\n     * Get user email\r\n     * @return Email or null if not found\r\n     */\r\n    fun getUserEmail(): String? {\r\n        return prefs.getString(USER_EMAIL, null)\r\n    }\r\n\r\n    /**\r\n     * Check if user is logged in\r\n     * @return true if user session exists, false otherwise\r\n     */\r\n    fun isLoggedIn(): Boolean {\r\n        return getUserId() != -1L && !getUsername().isNullOrEmpty()\r\n    }\r\n\r\n    /**\r\n     * Clear all session data (logout)\r\n     */\r\n    fun clearSession() {\r\n        prefs.edit().clear().apply()\r\n    }\r\n\r\n\r\n\r\n}
===================================================================
diff --git a/app/src/main/java/com/example/qareeb/data/SessionManager.kt b/app/src/main/java/com/example/qareeb/data/SessionManager.kt
--- a/app/src/main/java/com/example/qareeb/data/SessionManager.kt	(revision b34ac8ad831a69b9d027eaabdb19462dbef567d6)
+++ b/app/src/main/java/com/example/qareeb/data/SessionManager.kt	(date 1769022862062)
@@ -4,7 +4,7 @@
 import android.content.SharedPreferences
 import androidx.security.crypto.EncryptedSharedPreferences
 import androidx.security.crypto.MasterKey
-import com.example.qareeb.data.entity.User
+//import com.example.qareeb.data.entity.User
 
 
 /**
